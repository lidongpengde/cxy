<!DOCTYPE html>
<html>
<head>
    <title>123</title>
    <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0"/>
     <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/asert/css/main.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.css" media="screen"/>
    <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.4.1&key=23834821b1465df3fa84571571947619&plugin=AMap.Autocomplete"></script>
    <script src="https://cdn.bootcss.com/vue/2.5.3/vue.js"></script>

</head>
<style>
    .amap-sug-result{
        position: absolute;
    }
</style>
<body>
<div class="container" style="margin-top: 70px" id="headapp">
    <table class="table table-hover ">
        <thead>
        <tr>
            <th>价格</th>
            <th>支付方式</th>
            <th>数量</th>
            <th>购买范围</th>
            <th>购买</th>
        </tr>
        </thead>
        <tbody>
            <tr v-for="item in items">
                <td>¥{{item.price}}</td>
                <td v-if="item.payMethod==1">
                    银行卡</td>
                <td v-if="item.payMethod==2">
                    支付宝</td>
                <td v-if="item.payMethod==3">
                    微信</td>
                <td v-if="item.payMethod=='1,2'">
                    银行卡、支付宝</td>
                <td v-if="item.payMethod=='1,3'">
                    银行卡、微信</td>
                <td v-if="item.payMethod=='2,3'">
                    支付宝、微信</td>
                <td v-if="item.payMethod=='1,2,3'">
                    银行卡、支付宝、微信</td>
                <td>{{ item.tradeCount }}</td>
                <td>{{ item.minTradeLimit }}-{{ item.maxTradeLimit }}</td>
                <td class="form-inline" >
                    <a href="#" onclick="tobuy(this)"   v-bind:id="item.id" class="btn btn-danger btn-xs " style="margin: 3px 0">购买</a>
                </td>
            </tr>

        </tbody>
    </table>
  </div>
<script>
    var headapp = new Vue({
        el: '#headapp',
        data: {
            items: [
            ],
            message:""
        }
    })
    $(document).ready(function(){
        var  classes = "LineInfo";
        var  htmltext="" ;
        $.ajax({
            type:'get',
            url:'https://api-otc.huobi.pro/v1/otc/trade/list/public?coinId=2&tradeType=1&currentPage=1&payWay=&country=&merchant=0&online=1&range=0',
            success:function (data){
                headapp.items=data.data;
            },
            error:function (e) {
                alert("系统繁忙"+e);
            }
        })
    })
function tobuy(o) {
    $.ajax({
        url: "https://api-otc.huobi.pro/v1/otc/order/ticket?tradeId="+o.id,
        data: {},
        type: "GET",
        beforeSend: function(xhr){xhr.setRequestHeader('token',"TICKET_89a1eee6db59e98eb804d8d56054b629449973c49a6c40d2935d8dfd6b57fae6")},
        success: function(e) {
            alert(e)
        }
    });
}

</script>
</body>
</html>